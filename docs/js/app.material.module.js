import{World as e}from"../js-libs/ecsy.module.js";import{GameSystem as t,TransformSystem as s,CameraSystem as o,Transform as n,MeshSystem as r,LightSystem as i,MaterialSystem as a,Camera as m,Mesh as p,Material as u,MeshTypes as c,Light as d,LightTypes as g}from"../js-libs/ecsy-babylon.module.js";class y extends e{constructor(){super()}get entities(){return this.entityManager._entities}get systems(){return this.systemManager._systems}get gameSystem(){return this.getSystem(t)}static instance(){return this._game||(this._game=new y),this._game}start(e,n,r){return this.registerSystem(t).registerSystem(s).registerSystem(o),n.forEach(e=>this.registerSystem(e)),this.gameSystem.start(e).addScene(r||"Scene1"),this}createEntity(){return super.createEntity().addComponent(n)}showDebugger(){this.gameSystem.getScene().debugLayer.show()}}const l=y.instance();l.start(document.getElementById("renderCanvas"),[r,i,a]),l.createEntity().addComponent(m).getMutableComponent(n).position.y=1.7,[{diffuse:"#E74C3C",z:3},{diffuse:"#3498DB",z:-3},{diffuse:"#27AE60",x:3},{diffuse:"#F1C40F",x:-3}].forEach(e=>{const t=l.createEntity().addComponent(p).addComponent(u,{color:{diffuse:e.diffuse}});e.x&&(t.getComponent(n).position.x=e.x),t.getComponent(n).position.y=.5,e.z&&(t.getComponent(n).position.z=e.z)}),l.createEntity().addComponent(p,{type:c.Ground,options:{width:8,height:8}}).addComponent(u,{texture:{diffuse:{url:"https://i0.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/wood_parquet_2-diffuse-1.jpg",uScale:4,vScale:4},specular:{url:"https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/wood_parquet_2-specular-1.jpg",uScale:4,vScale:4},bump:{url:"https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/wood_parquet_2-normal-1.jpg",uScale:4,vScale:4}}});const h=l.createEntity().addComponent(d,{type:g.Point,color:{diffuse:"#AAFFAA"}});h.getMutableComponent(d).intensity=1.5,h.getMutableComponent(n).position.y=2;
