import{World as e}from"../js-libs/ecsy.module.js";import{GameSystem as t,TransformSystem as s,CameraSystem as o,Transform as n,Scene as r,MeshSystem as a,LightSystem as i,MaterialSystem as c,Camera as p,Mesh as u,Material as m,MeshTypes as d,Light as g,LightTypes as y}from"../js-libs/ecsy-babylon.module.js";class l extends e{constructor(){super()}get entities(){return this.entityManager._entities}get systems(){return this.systemManager._systems}get gameSystem(){return this.getSystem(t)}static instance(){return this._game||(this._game=new l),this._game}start(e,n){return this.registerSystem(t).registerSystem(s).registerSystem(o),n.forEach(e=>this.registerSystem(e)),this.gameSystem.start(e),this}createEntity(){return super.createEntity().addComponent(n)}createScene(e){return super.createEntity().addComponent(r,{color:e})}showDebugger(){this.gameSystem.activeScene.debugLayer.show()}}const h=l.instance();h.start(document.getElementById("renderCanvas"),[a,i,c]),h.createScene({clear:"#5B2C6FFF"}),h.createEntity().addComponent(p).getMutableComponent(n).position.y=1.7,[{diffuse:"#E74C3C",z:3},{diffuse:"#3498DB",z:-3},{diffuse:"#27AE60",x:3},{diffuse:"#F1C40F",x:-3}].forEach(e=>{const t=h.createEntity().addComponent(u).addComponent(m,{color:{diffuse:e.diffuse}});e.x&&(t.getComponent(n).position.x=e.x),t.getComponent(n).position.y=.5,e.z&&(t.getComponent(n).position.z=e.z)}),h.createEntity().addComponent(u,{type:d.Ground,options:{width:8,height:8}}).addComponent(m,{texture:{diffuse:{url:"https://i0.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/wood_parquet_2-diffuse-1.jpg",uScale:4,vScale:4},specular:{url:"https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/wood_parquet_2-specular-1.jpg",uScale:4,vScale:4},bump:{url:"https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/wood_parquet_2-normal-1.jpg",uScale:4,vScale:4}}});const f=h.createEntity().addComponent(g,{type:y.Point,color:{diffuse:"#AAFFAA"}});f.getMutableComponent(g).intensity=1.5,f.getMutableComponent(n).position.y=2;
