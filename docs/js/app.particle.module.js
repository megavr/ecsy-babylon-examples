import{World as t}from"../js-libs/ecsy.module.js";import{GameSystem as e,TransformSystem as s,CameraSystem as o,Transform as n,MeshSystem as a,LightSystem as r,MaterialSystem as i,ParticleSystem as p,Camera as l,Particle as c,Mesh as u,MeshTypes as m,Material as g,Light as y,LightTypes as w}from"../js-libs/ecsy-babylon.module.js";class d extends t{constructor(){super()}get entities(){return this.entityManager._entities}get systems(){return this.systemManager._systems}get gameSystem(){return this.getSystem(e)}static instance(){return this._game||(this._game=new d),this._game}start(t,n,a){return this.registerSystem(e).registerSystem(s).registerSystem(o),n.forEach(t=>this.registerSystem(t)),this.gameSystem.start(t).addScene(a||"Scene1"),this}createEntity(){return super.createEntity().addComponent(n)}showDebugger(){this.gameSystem.getScene().debugLayer.show()}}const h=d.instance();h.start(document.getElementById("renderCanvas"),[a,r,i,p]),h.createEntity().addComponent(l).getMutableComponent(n).position.y=1.7,h.createEntity().addComponent(c,{texture:{particle:{url:"https://raw.githubusercontent.com/BabylonJS/Babylon.js/master/assets/particles/textures/explosion/Flare.png"}}});const b=h.createEntity().addComponent(u,{type:m.Ground,options:{width:10,height:10}}).addComponent(g,{texture:{diffuse:{url:"https://i1.wp.com/www.sharetextures.com/wp-content/uploads/2018/10/PBR-tactile_paving.jpg-diffuse-.jpg?ssl=1",uScale:5,vScale:5},bump:{url:"https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2018/10/PBR-tactile_paving.jpg-normal-.jpg?ssl=1",uScale:5,vScale:5},specular:{url:"https://i0.wp.com/www.sharetextures.com/wp-content/uploads/2018/10/PBR-tactile_paving.jpg-specular-.jpg?ssl=1",uScale:5,vScale:5}}});b.getMutableComponent(n).position.x=5,b.getMutableComponent(n).position.z=5,[{x:5,y:5,z:10},{x:10,y:5,z:5,ry:90}].forEach(t=>{const e=h.createEntity().addComponent(u,{type:m.Plane,options:{width:10,height:10}}).addComponent(g,{texture:{diffuse:{url:"https://i0.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/brick_wall_5-diffuse.jpg?ssl=1"},bump:{url:"https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/brick_wall_5-normal.jpg?ssl=1"},specular:{url:"https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2019/04/brick_wall_5-specular.jpg?ssl=1"}}});t.x&&(e.getMutableComponent(n).position.x=t.x),t.y&&(e.getMutableComponent(n).position.y=t.y),t.z&&(e.getMutableComponent(n).position.z=t.z),t.ry&&(e.getMutableComponent(n).rotation.y=t.ry)});const x=h.createEntity().addComponent(y,{type:w.Point});x.getMutableComponent(n).position.x=5,x.getMutableComponent(n).position.y=5,x.getMutableComponent(n).position.z=5;
